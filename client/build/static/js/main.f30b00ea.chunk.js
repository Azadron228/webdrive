(this.webpackJsonpclient=this.webpackJsonpclient||[]).push([[0],{121:function(e,t,n){},148:function(e,t,n){e.exports=n(239)},234:function(e,t,n){},237:function(e,t,n){},238:function(e,t,n){},239:function(e,t,n){"use strict";n.r(t);var r=n(0),a=n.n(r),o=n(9),l=n.n(o),c=n(10),i=n(25),u=n(123),d=Object(u.a)(),f=n(31),s=n(124),m=n(24),E="GET_USER_SUCCESS",p="GET_USER_ERROR",v=function(e,t,n){return{type:E,id:e,name:t,home:n}},h=function(e){return{type:p,error:e}},b={currentUser:null,id:null,home:null};var O=n(26),y=n.n(O),F="SET_FOLDER_VIEW",S="GET_FOLDER_SUCCESS",I="GET_FOLDER_ERROR",g="CREATE_FOLDER",j="CREATE_FOLDER_SUCCESS",C="CREATE_FOLDER_ERROR",D="DELETE_FOLDER",N="DELETE_FOLDER_SUCCESS",_="DELETE_FOLDER_ERROR",R="CREATE_FILE",w="CREATE_FILE_SUCCESS",L="CREATE_FILE_ERROR",T="DELETE_FILE",k="DELETE_FILE_SUCCESS",A="DELETE_FILE_ERROR",M="SEARCH_ALL",V="SEARCH_ALL_SUCCESS",U="SEARCH_ALL_ERROR",H="MOVE_FILE",W="MOVE_FILE_SUCCESS",B="SEARCH_FILE_ERROR",q="MOVE_FOLDER",G="MOVE_FOLDER_SUCCESS",x="SEARCH_FOLDER_ERROR",z="SET_MOVE_ID",P=function(e,t){return{type:S,folderId:e,folder:t}},J=function(e,t){return{type:I,folderId:e,error:t}},K=function(e,t){return{type:g,parentFolderId:e,name:t}},X=function(e,t,n){return{type:j,parentFolderId:e,name:t,folder:n}},Q=function(e,t,n){return{type:C,parentFolderId:e,name:t}},$=function(e,t){return{type:D,parentFolderId:e,folderId:t}},Y=function(e,t){return{type:N,parentFolderId:e,folderId:t}},Z=function(e,t,n){return{type:_,parentFolderId:e,folderId:t,error:n}},ee=function(e,t,n){return{type:R,parentFolderId:e,name:t,file:n}},te=function(e,t){return{type:w,parentFolderId:e,file:t}},ne=function(e,t){return{type:L,parentFolderId:e,error:t}},re=function(e,t){return{type:T,parentFolderId:e,fileId:t}},ae=function(e,t){return{type:k,parentFolderId:e,fileId:t}},oe=function(e,t,n){return{type:A,parentFolderId:e,fileId:t,error:n}},le=function(e){return{type:M,query:e}},ce=function(e,t){return{type:V,query:e,data:t}},ie=function(e,t){return{type:U,query:e,error:t}},ue=function(e,t,n){return{type:H,fileId:e,parentFolderId:t,folderId:n}},de=function(e,t,n,r){return{type:W,fileId:e,from:t,to:n,item:r}},fe=function(e,t,n,r){return{type:B,fileId:e,parentFolderId:t,folderId:n,error:r}},se=function(e,t,n){return{type:q,id:e,parentFolderId:t,folderId:n}},me=function(e,t,n,r){return{type:G,id:e,from:t,to:n,item:r}},Ee=function(e,t,n,r){return{type:x,id:e,parentFolderId:t,folderId:n,error:r}},pe=function(e,t,n){return{type:z,id:e,moveType:t,parentFolderId:n}},ve=function(e){return{type:F,folderView:e}},he={folderId:null,folderView:"list",folderData:{},move:{id:null,type:""},searchData:{files:[],folders:[]}};var be=Object(f.c)({user:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:b,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case E:return Object(m.a)(Object(m.a)({},b),{},{id:t.id,home:t.home,currentUser:t.id});default:return e}},folder:function(){var e,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:he,n=arguments.length>1?arguments[1]:void 0;switch(n.type){case S:return Object(m.a)(Object(m.a)({},t),{},{folderId:n.folderId,folderData:n.folder});case j:return t.folderData.id!==n.parentFolderId?t:((e=y()(t)).folderView="list",e.folderData.folders.push(n.folder),e);case w:return t.folderData.id!==n.parentFolderId?t:((e=y()(t)).folderView="list",e.folderData.files.push(n.file),e);case F:return(e=y()(t)).folderView=n.folderView,e;case k:case N:var r=n.hasOwnProperty("folderId")?["folders","folderId"]:["files","fileId"];return(e=y()(t)).folderData[r[0]]=e.folderData[r[0]].filter((function(e){return e.id!==n[r[1]]})),e;case V:return Object(m.a)(Object(m.a)({},t),{},{searchData:{files:n.data.files||[],folders:n.data.folders||[]}});case G:case W:return(e=y()(t)).folderData.folders=n.from.folders,e.folderData.files=n.from.files,e;case z:return Object(m.a)(Object(m.a)({},t),{},{move:{id:n.id,type:n.moveType,parentFolderId:n.parentFolderId}});default:return t}}}),Oe=(window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__||f.d)(Object(f.a)(s.a)),ye=Object(f.e)(be,Oe),Fe=n(12),Se=n(125),Ie=n(126),ge="http://localhost:8000/api/",je=n(87),Ce=n.n(je),De=function(e,t){return fetch(ge+e,t).then((function(e){return e.json()}))},Ne=function(){function e(){Object(Se.a)(this,e)}return Object(Ie.a)(e,null,[{key:"get",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};"/"!==e[e.length-1]&&(e+="/");var n=Ce()({},{headers:{"Content-Type":"application/json",Accept:"application/json"}},{method:"GET"}),r=Object.keys(t).reduce((function(e,n){return e=e+n+"="+t[n]+"&"}),"");return r.endsWith("&")&&(r=r.slice(0,r.length-1)),""!=r&&(e=e+"?"+r),De(e,n)}},{key:"postForm",value:function(e,t){"/"!==e[e.length-1]&&(e+="/");var n=y()({headers:{"Content-Type":"application/json",Accept:"application/json"}});n.method="POST",delete n.headers["Content-Type"];var r=new FormData;return Object.keys(t).reduce((function(e,n){return e.append(n,t[n]),e}),r),n.body=r,De(e,n)}},{key:"post",value:function(e,t){"/"!==e[e.length-1]&&(e+="/");var n=y()({headers:{"Content-Type":"application/json",Accept:"application/json"}});return n.method="POST",n.body=JSON.stringify(t),De(e,n)}},{key:"delete",value:function(e){"/"!==e[e.length-1]&&(e+="/");var t=Ce()({},{headers:{"Content-Type":"application/json",Accept:"application/json"}},{method:"DELETE"});return De(e,t)}}]),e}(),_e=function(e){return function(t){return console.log("calling folder",e),Ne.get("folders/".concat(e,"/")).then((function(n){return t(P(e,n))})).catch((function(n){return t(J(e,n.toString()))}))}},Re=function(){return function(e){return e((function(e){return Ne.get("users/1").then((function(t){return e(v(t.id,t.name,t.home))})).catch((function(t){return e(h(t.name))}))})).then((function(t){var n=(d.location.pathname||"").split("/");if("folders"===n[1]){var r=n[2];return e(_e(r))}if(t.id){var a=t.home;return e(_e(a))}}))}},we=function(e){return function(t,n){var r=n().folder.move||{},a=r.id,o=r.type,l=r.parentFolderId;return"file"===o?t(function(e,t,n){return function(r){return r(ue(e,t,n)),Ne.post("move",{id:e,fromFolder:t,toFolder:n,type:"file"}).then((function(t){return r(de(e,t.from,t.to,t.item))})).catch((function(a){return r(fe(e,t,n,a.toString()))}))}}(a,l,e)):"folder"===o?t(function(e,t,n){return function(r){return r(se(e,t,n)),Ne.post("move",{id:e,fromFolder:t,toFolder:n,type:"folder"}).then((function(t){return r(me(e,t.from,t.to,t.item))})).catch((function(a){return r(Ee(e,t,n,a.toString()))}))}}(a,l,e)):void 0}};n(234);function Le(){var e=Object(c.c)((function(e){return e.folder.folderData||{}}))||{},t=e.tree||[];return a.a.createElement("div",{className:"sidebar"},a.a.createElement("div",{className:"header"},a.a.createElement("div",{className:"appName"},"Web ",a.a.createElement("span",{className:"branding"},"Drive")),a.a.createElement("div",{className:"divider"})),a.a.createElement("div",{className:"folderStructure"},a.a.createElement("div",{className:"list"},t.map((function(t){return a.a.createElement(i.b,{key:t.id,className:"sidebarLink",to:"/folders/"+t.id},a.a.createElement("div",{className:"listItem "+(e.id===t.id?"current":"")},t.name))})))))}var Te=n(268),ke=n(131),Ae=n.n(ke),Me=n(132),Ve=n.n(Me),Ue=n(18),He=n(129),We=n.n(He),Be=n(130),qe=n.n(Be),Ge=n(128),xe=n.n(Ge),ze=n(127),Pe=n.n(ze),Je=function(e){var t=e.type,n=e.item,r=e.parentFolderId,o=e.showMoveDialog,l=e.children,i=Object(c.b)();return a.a.createElement("div",{key:n.id,className:"card "+t},r?a.a.createElement("div",{className:"cardActions"},a.a.createElement("div",{className:"action"},a.a.createElement(Te.a,{size:"small",style:{color:"inherit"},onClick:function(){o(!0),i(pe(n.id,"fileCard"===t?"file":"folder",r))}},a.a.createElement(Pe.a,null)),a.a.createElement(Te.a,{size:"small",style:{color:"inherit"},onClick:function(){i("fileCard"===t?function(e,t){return function(n){return n(re(e,t)),Ne.delete("files/".concat(t)).then((function(r){return n(ae(e,t))})).catch((function(r){return n(oe(e,t,r.toString()))}))}}(r,n.id):function(e,t){return function(n){return n($(e,t)),Ne.delete("folders/".concat(t)).then((function(r){return n(Y(e,t))})).catch((function(r){return n(Z(e,t,r.toString()))}))}}(r,n.id))}},a.a.createElement(xe.a,null)))):null,l,a.a.createElement("div",{className:"cardFooter"},a.a.createElement("div",{className:"cardName"},n.name)))},Ke=function(e){var t=e.folder,n=e.parentFolderId,r=e.showMoveDialog,o=Object(c.b)();return a.a.createElement(Je,{item:t,parentFolderId:n,type:"folderCard",showMoveDialog:r},a.a.createElement(i.b,{to:"/folders/"+t.id,onClick:function(){o(_e(t.id))}},a.a.createElement("div",{className:"icon"},a.a.createElement(We.a,{style:{fontSize:"inherit",color:"inherit"}}))))},Xe=function(e){var t=e.file,n=e.parentFolderId,r=e.showMoveDialog;return a.a.createElement(Je,{item:t,parentFolderId:n,type:"fileCard",showMoveDialog:r},a.a.createElement("div",{className:"icon"},a.a.createElement(qe.a,{style:{fontSize:"inherit",color:"inherit"}})))},Qe=n(273),$e=n(274),Ye=n(285),Ze=n(278),et=n(240),tt=n(279),nt=n(284);function rt(){var e=Object(r.useState)(""),t=Object(Ue.a)(e,2),n=t[0],a=t[1],o=Object(r.useState)(n),l=Object(Ue.a)(o,2),c=l[0],i=l[1],u=Object(r.useCallback)(function(e,t){var n=null;return function(){var r=this,a=arguments;clearTimeout(n),n=setTimeout((function(){e.apply(r,a)}),t)}}((function(e){i(e)}),250),[]);return[n,c,function(e){var t=e.target.value;a(t),u(t)},function(e){13===e.keyCode&&(e.preventDefault(),i(n))}]}function at(e){var t=rt(),n=Object(Ue.a)(t,4),o=n[0],l=n[1],i=n[2],u=n[3],d=Object(c.c)((function(e){return e.folder.searchData||{}})).folders||[],f=Object(c.b)();Object(r.useEffect)((function(){var e;f((e=l,function(t){return t(le(e)),Ne.get("search",{query:e,type:"folder"}).then((function(n){return t(ce(e,n))})).catch((function(n){return t(ie(e,n.toString()))}))}))}),[l]);var s=e.open,m=e.showMoveDialog;return a.a.createElement(nt.a,{onClose:function(){m(!1)},"aria-labelledby":"simple-dialog-title",open:s},a.a.createElement(Qe.a,{id:"simple-dialog-title",className:"dialogTitle"},"Move To"),a.a.createElement($e.a,null,a.a.createElement(Ye.a,{autoFocus:!0,className:"moveSearch",label:"Search Folders",value:o,onKeyDown:u,onChange:i})),a.a.createElement(Ze.a,null,d.map((function(e){return a.a.createElement(et.a,{button:!0,onClick:function(){return function(e){m(!1),f(we(e.id))}(e)},key:e.id},a.a.createElement(tt.a,{primary:e.name}))}))))}function ot(e){var t=e.folder,n=t.folders||[],o=t.files||[],l=Object(r.useState)(!1),c=Object(Ue.a)(l,2),i=c[0],u=c[1],d=function(e){u(e)};return a.a.createElement("div",{className:"folderContents"},a.a.createElement("div",{className:"list folderList"},a.a.createElement("div",{className:"listScroll folderList"},n.map((function(e){return a.a.createElement(Ke,{key:e.id,folder:e,parentFolderId:t.id,showMoveDialog:d})})))),a.a.createElement("div",{className:"list fileList"},a.a.createElement("div",{className:"listScroll fileList"},o.map((function(e){return a.a.createElement(Xe,{key:e.id,file:e,parentFolderId:t.id,showMoveDialog:d})})))),a.a.createElement(at,{open:i,showMoveDialog:d}))}var lt=n(282),ct=n(281),it=n(286),ut=n(277),dt=n(280);function ft(e){var t=e.folder,n=Object(r.useState)("folder"),o=Object(Ue.a)(n,2),l=o[0],i=o[1],u=Object(r.useState)(""),d=Object(Ue.a)(u,2),f=d[0],s=d[1],m=Object(r.useState)(),E=Object(Ue.a)(m,2),p=E[0],v=E[1],h=Object(c.b)(),b=function(e,t){e(t.target.value)},O="file"===l&&!p;return a.a.createElement("div",{className:"addForm"},a.a.createElement("div",{className:"formCard"},a.a.createElement("form",{className:"form"},a.a.createElement(Ye.a,{variant:"outlined",label:"Name",className:"input",value:f,onChange:b.bind(null,s),autoFocus:!0}),a.a.createElement(ut.a,null,a.a.createElement(it.a,{htmlFor:"grouped-native-select",className:"input"},"Create a new"),a.a.createElement(lt.a,{id:"grouped-native-select",value:l,onChange:b.bind(null,i),className:"input",margin:"normal"},a.a.createElement(dt.a,{className:"input",value:"folder"},"Folder"),a.a.createElement(dt.a,{value:"file"},"File"))),"file"===l?a.a.createElement(ct.a,{className:"input upload",variant:"contained",style:{maxWidth:"200px",overflow:"hidden"},disabled:p,component:"label"},p?p.name:"Upload File",a.a.createElement("input",{type:"file",onChange:function(e){v(e.target.files[0])},style:{display:"none"}})):null,a.a.createElement(ct.a,{variant:"contained",disabled:O,className:"submit",onClick:function(){console.log("reff",l,f),h("file"===l?function(e,t,n){return function(r){return r(ee(e,t,n)),Ne.postForm("folders/".concat(e,"/files"),{name:t,file:n}).then((function(t){return r(te(e,t))})).catch((function(t){return r(ne(e,t.toString()))}))}}(t.id,f,p):function(e,t){return function(n){return n(K(e,t)),Ne.postForm("folders/".concat(e,"/folders"),{name:t}).then((function(r){return n(X(e,t,r))})).catch((function(r){return n(Q(e,t,r.toString()))}))}}(t.id,f))}},"Submit"))))}n(121);function st(){var e=Object(c.c)((function(e){return e.folder.folderData||{}})),t=Object(c.c)((function(e){return e.folder.folderView||""})),n=Object(c.b)();return a.a.createElement("div",{className:"mainView"},a.a.createElement("div",{className:"header"},a.a.createElement("div",{className:"folderHeader"},a.a.createElement("div",{className:"folderName"},e.name),a.a.createElement("div",{className:"action add "+("list"==t?"show":"")},a.a.createElement(Te.a,{style:{background:"#1B53BD",color:"inherit"},onClick:function(){n(ve("add"))}},a.a.createElement(Ae.a,null))),a.a.createElement("div",{className:"action search "+("list"===t?"show":"")},a.a.createElement(i.b,{to:"/search",style:{color:"inherit"}},a.a.createElement(Te.a,{style:{background:"#1B53BD",color:"inherit"}},a.a.createElement(Ve.a,null))))),a.a.createElement("div",{className:"divider"})),a.a.createElement("div",{className:"mainContent"},"list"===t?a.a.createElement(ot,{folder:e}):a.a.createElement(ft,{folder:e})))}function mt(){Object(c.c)((function(e){return e.folder.folderData||{}}));var e=Object(c.c)((function(e){return e.folder.searchData||{}})),t=(Object(c.c)((function(e){return e.folder.folderView||""})),Object(c.b)()),n=Object(r.useState)(""),o=Object(Ue.a)(n,2),l=o[0],i=o[1],u=Object(r.useState)(l),d=Object(Ue.a)(u,2),f=d[0],s=d[1];Object(r.useEffect)((function(){var e;console.log("Search:",f),t((e=f,function(t){return t(le(e)),Ne.get("search",{query:e}).then((function(n){return t(ce(e,n))})).catch((function(n){return t(ie(e,n.toString()))}))}))}),[f]);var m=Object(r.useCallback)(function(e,t){var n=null;return function(){var r=this,a=arguments;clearTimeout(n),n=setTimeout((function(){e.apply(r,a)}),t)}}((function(e){s(e)}),250),[]);return a.a.createElement("div",{className:"mainView"},a.a.createElement("div",{className:"header"},a.a.createElement("div",{className:"folderHeader"},a.a.createElement(Ye.a,{autoFocus:!0,className:"searchField",label:"Query",value:l,onKeyDown:function(e){13===e.keyCode&&(e.preventDefault(),s(l))},onChange:function(e){var t=e.target.value;i(t),m(t)}}))),a.a.createElement("div",{className:"mainContent"},a.a.createElement(ot,{folder:e})))}n(237);var Et=Object(Fe.f)((function(e){var t=Object(c.b)();return Object(r.useEffect)((function(){var n;t((n=e.location,function(e,t){var r=t(),a=r.user||{},o=r.folder.folderData||{},l=n.pathname||"";if(l.startsWith("/folders")||"/"===l){var c=l.split("/"),i=o.id;return"folders"===c[1]&&(i=c[2]),a.id&&o.id&&o.id!==i?e(_e(i)):void 0}}))}),[e.location]),Object(r.useEffect)((function(){t(Re())}),[t]),a.a.createElement("div",{className:"page homepage"},a.a.createElement("div",{className:"sidebar-wrapper"},a.a.createElement(Le,null)),a.a.createElement("div",{className:"main-wrapper"},a.a.createElement(Fe.c,null,a.a.createElement(Fe.a,{path:"/folders/:id"},a.a.createElement(st,null)),a.a.createElement(Fe.a,{path:"/search"},a.a.createElement(mt,null)),a.a.createElement(Fe.a,{exact:!0,path:"/"},a.a.createElement(st,null)))))}));n(238),Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));l.a.render(a.a.createElement(a.a.StrictMode,null,a.a.createElement(c.a,{store:ye},a.a.createElement(i.a,null,a.a.createElement(Et,null)))),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}},[[148,1,2]]]);
//# sourceMappingURL=main.f30b00ea.chunk.js.map